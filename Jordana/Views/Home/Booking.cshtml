@model Jordana.Models.TouristsSite;
@{
    ViewData["Title"] = "Booking";

}

<div b-ho1eqyux90="" class="container-fluid position-relative p-0">


    <style>
        /* Set fixed size for carousel images */
        .carousel-inner img {
        height: 400px; /* Adjust this height as needed */
        object-fit: cover; /* Makes sure the image covers the area nicely */
        }
    </style>

    <!-- Header Start -->
    <div class="container-fluid bg-breadcrumb" style="background-image:linear-gradient(rgba(0, 0, 0, .5), rgba(0, 0, 0, 0.5)),url('https://capstone.zero1planet.com/uploads/bestback.jpeg') ; background-size: cover; background-position: center;">
        <div class="container text-center py-5" style="max-width: 900px;">
            <h3 class="text-white display-3 mb-4">@Model.SiteName</h3>
            <ol class="breadcrumb justify-content-center mb-0">
                <li class="breadcrumb-item active text-white">Online Booking</li>
            </ol>
        </div>
    </div>
    <!-- Header End -->

    <!--Space Start-->
    <div class="container py-3 my-3">
    </div>
    <!--Space End-->

    <!--Slider Header Start-->
    <div class="container text-start" style="margin-top: 40px; margin-bottom: 20px;">
        <h6 class="fw-normal display-6 mb-0 text-primary">
            <i class="fa fa-images" style="color: #b88e5d;"></i>Site Gallery
        </h6>
    </div>
    <!--Slider Header End-->

    <!-- Slider Start -->
    <div id="carouselExample" class="carousel slide" data-bs-ride="carousel" style="max-width: 1500px; margin: auto;">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://capstone.zero1planet.com/uploads/bestback.jpeg" class="d-block w-100" alt="@Model.SiteName">
            </div>

            @foreach(var image in Model.SiteMedia)
            {
                if (image.Type == "Image")
                {
                    <div class="carousel-item">

                        <img src="~/uploads/@image.Url" class="d-block w-100" alt="@Model.SiteName">
                    </div>
                    
                }
               
            }
           
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <!-- Slider End -->

    <!--Space Start-->
    <div class="container py-3 my-3">
    </div>
    <!--Space End-->

    <div>
        <div class="container text-start" style="margin-top: 40px; margin-bottom: 20px;">
            <h6 class="fw-normal display-6 mb-0 text-primary">
                <i class="fa fa-link" style="color: #b88e5d;"></i>Site External Resources
            </h6>
            <div class="row">
                @foreach(var item in Model.SiteMedia)
                {
                    if (item.Type != "Image")
                    {
                        <div class="col-md-4 col-sm-12" style="margin-top: 5px;">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Learn More About @Model.SiteName With </h5>
                                    <p class="card-text">@item.Type</p>
                                    <a href="@item.Url" target="_blank" class="btn btn-primary">Open Link</a>
                                </div>
                            </div>
                        </div>
                    }
                   
                }
                
            </div>
        </div>
    </div>
    <!--Table Header Start-->
    <div class="container text-start" style="margin-top: 40px; margin-bottom: 20px;">
        <h6 class="fw-normal display-6 mb-0 text-primary">
            <i class="fa fa-landmark " style="color: #b88e5d;"></i>Site Details
        </h6>
    </div>
    <!--Table Header End-->

    <!--Table Start-->
    <div style="padding: 15px;">
    <table class="table table-bordered border-light table-striped table-hover" >
        <thead style="background-color: #b88e5d; color: white;">
            <tr>
                <th scope="col">Site ID</th>
                <th scope="col">Site Name</th>
                <th scope="col">Site Description</th>
                <th scope="col">City</th>
                <th scope="col">Region</th>
                <th scope="col">Location</th>
                <th scope="col">Category</th>
                <th scope="col">Entry Fee</th>
                <th scope="col">Opening Hours</th>
            </tr>
        </thead>
        <tbody class="table table-bordered border-primary">
            <tr>
                <th scope="row">@Model.SiteId</th>
                <td>@Model.SiteName</td>
                <td>@Model.SiteDescription</td>
                <td>@Model.City</td>
                <td>@Model.Region</td>
                <td><a href="@Model.SiteLocation" target="_blank" class="badge bg-primary">Open maps</a></td>
                <td>@Model.Category</td>
                <td>@Model.EntryFee</td>
                <td>@Model.OpeningHours</td>
            </tr>
        </tbody>
    </table>
    </div>
    <!--Table End-->

    <!--Booking Start -->
    <div class="container-fluid booking py-5" style="margin-top: 100px;">
        <div class="container py-5">
            <div class="row g-5 align-items-center">
                <div class="col-lg-6">
                    <h5 class="section-booking-title pe-3">Booking</h5>
                    <h1 class="text-white mb-4">Book Your Visit to Jordan’s Stunning Tourist Sites</h1>
                    <p class="text-white mb-4">
                        Fill out the form shown to reserve your visit to one of Jordan’s top tourist destinations. Please provide the information needed and make sure to type any special requests you may have. We’ll confirm your booking via email with all the details.
                    </p>
                    <p class="text-white mb-4">
                        If you need any help, Do not hesitate to contact any of our admins.
                    </p>
                </div>
                <div class="col-lg-6">
                    <h1 class="text-white mb-3">Booking Form</h1>
                    <form id="bookingForm" method="post" asp-action="Booking" asp-controller="Home" >
                        <input type="hidden" name="siteId" value="@Model.SiteId" />
                        <div class="row g-3">
                            <!-- Booking Start Date -->
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control bg-white border-0" id="bookingDate" name="bookingDate" placeholder="Booking Date">
                                    <label for="bookingDate">Booking Date</label>
                                </div>
                            </div>

                            <!-- Booking End Date -->
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control bg-white border-0" id="bookingEndDate" name="bookingEndDate" placeholder="Booking End Date">
                                    <label for="bookingEndDate">Booking End Date</label>
                                </div>
                            </div>

                            <!-- Transportation -->
                            <div class="col-md-12">
                                <div class="form-floating">
                                    <select class="form-select bg-white border-0" id="transporation" name="transporation">
                                        <option value="" selected disabled>Select</option>
                                        <option value="car">Car</option>
                                        <option value="bus">Tourist Bus</option>
                                        <option value="none">No Transportation</option>
                                    </select>
                                    <label for="transporation">Transportation</label>
                                </div>
                            </div>

                            <!-- Special Request -->
                            <div class="col-12">
                                <div class="form-floating">
                                    <textarea class="form-control bg-white border-0" id="SpecialRequest" name="SpecialRequest" placeholder="Special Request" style="height: 100px"></textarea>
                                    <label for="SpecialRequest">Special Request</label>
                                </div>
                            </div>

                            <!-- Submit -->
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary text-white w-100 py-3">Book Now</button>
                            </div>
                        </div>
                    </form>
                    

                </div>
            </div>
        </div>
    </div>
    <!--Booking End -->
</div>
<script>
    document.getElementById("bookingForm").addEventListener("submit", function (e) {
        const bookingDate = new Date(document.getElementById("bookingDate").value);
        const bookingEndDate = new Date(document.getElementById("bookingEndDate").value);
        const today = new Date();
        today.setHours(0, 0, 0, 0); // ignore time portion

        if (bookingDate <= today) {
            alert("Booking date must be after today.");
            e.preventDefault();
            return;
        }

        if (bookingEndDate <= bookingDate) {
            alert("End date must be after the booking start date.");
            e.preventDefault();
            return;
        }

        const trans = document.getElementById("transporation").value;
        if (!["car", "bus", "none"].includes(trans)) {
            alert("Please select a valid transportation option.");
            e.preventDefault();
        }
    });
</script>